@page
@model SM.APP.Pages.Events.ListEventMembersModel
@{
    ViewData["Title"] = "Event Members";
}
<div class="container mt-4" id="container">
    <div class="d-flex flex-wrap justify-content-between align-items-center mb-4 gap-2">
        <h4 class="mb-0">
            Event Members <span id="counter" class="text-muted fw-normal"></span>
        </h4>
        <div class="d-flex flex-wrap gap-2">
            <button class="btn btn-outline-secondary" id="update-attendance">
                <i class="bi bi-person-check me-1"></i>Update Attendance
            </button>
            <button class="btn btn-outline-primary" id="download-excel">
                <i class="bi bi-download me-1"></i>Download
            </button>
        </div>
    </div>
    <input type="hidden" id="eventID" name="eventID" value="@ViewContext.HttpContext.Request.Query["eventID"]" />

    <div class="d-flex flex-wrap align-items-end gap-3 mb-4 p-3 border rounded bg-light">
        <div class="flex-grow-1" style="min-width: 200px;">
            <label for="search-filter" class="form-label small">Search</label>
            <div class="input-group">
                <span class="input-group-text"><i class="bi bi-search"></i></span>
                <input type="text" class="form-control" id="search-filter" placeholder="Code, Name, Age...">
            </div>
        </div>

        <div>
            <label for="active-filter" class="form-label small">Status</label>
            <select id="active-filter" class="form-select">
                <option value="all" selected>All</option>
                <option value="null" >Registered</option>
                <option value="true">Present</option>
                <option value="false">Absent</option>
            </select>
        </div>

        <div>
            <label for="baptised-filter" class="form-label small">Baptism Status</label>
            <select id="baptised-filter" class="form-select">
                <option value="all" selected>Show All</option>
                <option value="true">Baptised Only</option>
                <option value="false">Not Baptised Only</option>
            </select>
        </div>

        <div>
            <label for="sort-by" class="form-label small">Sort by</label>
            <div class="input-group">
                <select class="form-select" id="sort-by">
                    <option value="sequence">Sequence</option>
                    <option value="attended">Status</option>
                    <option value="age">Age</option>
                    <option value="team">Team</option>
                    <option value="bus">Bus</option>
                </select>
                <button class="btn btn-outline-secondary" id="sort-direction">
                    <i class="bi bi-arrow-down"></i>
                </button>
            </div>
        </div>
    </div>


    <div class="row g-4" id="members-grid">
    </div>
</div>
<partial name="_MemberDetailsModalPartial" />
@section Scripts {
    <script>
        var apiBaseUrl = '@Services.SMConfigurationManager.ApiBase';
    </script>
    <script src="~/js/funds/common.js" asp-append-version="true"></script>
    <script src="~/js/funds/listing.js" asp-append-version="true"></script>
    <script src="~/js/aids/listing.js" asp-append-version="true"></script>
    <script src="~/js/meetings/list-member-attendance.js" asp-append-version="true"></script>
    <script src="~/js/members/details.js" asp-append-version="true"></script>
    <script src="~/js/events/event-members.js" asp-append-version="true"></script>
}